# This file was generated by Ansible for {{ ansible_fqdn }}
# Do NOT modify this file by hand!

GPG_KEY='{{ item.gpg_key|default(backup_gpg_key) }}'
GPG_PW='{{ item.gpg_pw|default(backup_gpg_pw) }}'
{% if item.gpg_keys_enc|default(None) %}
GPG_KEYS_ENC='{{item.gpg_keys_enc}}'
{% endif %}
{% if item.gpg_key_sign|default(None) %}
GPG_KEY_SIGN='{{item.gpg_key_sign}}'
{% endif %}
{% if item.gpg_pw_sign|default(None) %}
GPG_PW_SIGN='{{item.gpg_pw_sign}}'
{% endif %}
GPG_OPTS='{{item.gpg_opts|default(backup_gpg_opts)}}'

TARGET='{{item.target|default(backup_target)}}'

{% if item.target_user|default(backup_target_user) %}
TARGET_USER='{{item.target_user|default(backup_target_user)}}'
{% endif %}
{% if item.target_pass|default(backup_target_pass) %}
TARGET_PASS='{{item.target_pass|default(backup_target_pass)}}'
{% endif %}

{% if item.source.startswith('postgresql://') %}
SOURCE='{{backup_work}}/{{item.name}}/{{item.source.split('postgresql://')[-1]}}.gz'
{% elif item.source.startswith('mysql://') %}
SOURCE='{{backup_work}}/{{item.name}}/{{item.source.split('mysql://')[-1]}}.gz'
{% elif item.source.startswith('mongo://') %}
SOURCE='{{backup_work}}/{{item.name}}/{{item.source.split('mongo://')[-1]}}.gz'
{% else %}
SOURCE='{{item.source|default(backup_source)}}'
{% endif %}

MAX_AGE='{{item.max_age|default(backup_max_age)}}'
MAX_FULL_BACKUPS='{{item.max_full_backups|default(backup_max_full_backups)}}'

VERBOSITY={{item.verbosity|default(backup_verbosity)}}

# exclude folders containing exclusion file (since duplicity 0.5.14)
# Uncomment the following two lines to enable this setting.
#FILENAME='.duplicity-ignore'
#DUPL_PARAMS="$DUPL_PARAMS --exclude-if-present '$FILENAME'"

# activates duplicity --full-if-older-than option (since duplicity v0.4.4.RC3)
# forces a full backup if last full backup reaches a specified age, for the
# format of MAX_FULLBKP_AGE see duplicity man page, chapter TIME_FORMATS
# Uncomment the following two lines to enable this setting.
#MAX_FULLBKP_AGE=1M
#DUPL_PARAMS="$DUPL_PARAMS --full-if-older-than $MAX_FULLBKP_AGE "

# sets duplicity --volsize option (available since v0.4.3.RC7)
# set the size of backup chunks to VOLSIZE MB instead of the default 25MB.
# VOLSIZE must be number of MB's to set the volume size to.
# Uncomment the following two lines to enable this setting.
#VOLSIZE=50
#DUPL_PARAMS="$DUPL_PARAMS --volsize $VOLSIZE "

# temporary file space. at least the size of the biggest file in backup
# for a successful restoration process. (default is '/tmp', if not set)
#TEMP_DIR=/tmp

# Modifies archive-dir option (since 0.6.0) Defines a folder that holds
# unencrypted meta data of the backup, enabling new incrementals without the
# need to decrypt backend metadata first. If empty or deleted somehow, the
# private key and it's password are needed.
# NOTE: This is confidential data. Put it somewhere safe. It can grow quite
#       big over time so you might want to put it not in the home dir.
# default '~/.cache/duplicity/duply_<profile>/'
# if set  '${ARCH_DIR}/<profile>'
#ARCH_DIR=/some/space/safe/.duply-cache

# more duplicity command line options can be added in the following way
# don't forget to leave a separating space char at the end
#DUPL_PARAMS="$DUPL_PARAMS --put_your_options_here "
